# Agent Definition Schema (JSON Scaled to YAML)
# File: schema/agent.yaml
# Purpose: Validate agent definition files before seeding DB

$schema: "http://json-schema.org/draft-07/schema#"
type: object
properties:
  apiVersion:
    type: string
    default: "v1"
  kind:
    type: string
    const: "Agent"
  metadata:
    type: object
    properties:
      id:
        type: string
        description: "Unique identifier (kebab-case)"
      name:
        type: string
      labels:
        type: object
    required: ["id", "name"]
  spec:
    type: object
    properties:
      role:
        type: string
        enum: ["ARCHITECT", "CODER", "REVIEWER", "QA", "PLANNER", "KNOWLEDGE_WORKER"]
      description:
        type: string
      capabilities:
        type: array
        items:
          type: string
      modelConfig:
        type: object
        properties:
          provider:
            type: string
            enum: ["openai", "anthropic", "gemini", "local"]
          model:
            type: string
          temperature:
            type: number
            minimum: 0.0
            maximum: 2.0
          maxTokens:
            type: integer
        required: ["provider", "model"]
      tools:
        type: array
        items:
          type: string # Tool ID or MCP Tool Name
      promptRef:
        type: string # Path to prompt file relative to repo root
    required: ["role", "modelConfig"]
required: ["apiVersion", "kind", "metadata", "spec"]
